# 実装計画書
## 「パパになるための禁煙」アプリ
### 男性妊活×禁煙サポート Webアプリケーション
**作成日：2026年2月**

---

## 1. アプリコンセプト

### 1.1 コンセプト概要

アプリ名：「パパになるための禁煙」

> 🎯 **キーポイント**：禁煙の動機を「子どものため」に紐づける。禁煙アプリは多数存在するが、男性妊活と絡めたものはほぼ皆無。これが最大の差別化ポイント。

### 1.2 ターゲットユーザー

- 禁煙を考えている、もしくは禁煙中の男性
- パートナーと妊活に取り組んでいる男性
- 禁煙の動機を明確にして継続したい人

### 1.3 差別化ポイント

「禁煙の理由が曖昧だと続かない」という問題に対し、子どものため・パートナーのためという強い動機を常に画面に置くことが本アプリの核心。科学的根拠に基づいた精子への効果を可視化することで、禁煙継続のモチベーションを維持する。

---

## 2. 主な機能

### 2.1 禁煙トラッキング

- 禁煙日数・節約金額のリアルタイムカウンター
- 「吸いたい」衝動ログ（強度・トリガー記録）
- 衝動が起きた時の「未来の子どもへのメッセージ」入力機能で気を紛らわせる

### 2.2 男性妊活サポート

- 禁煙が精子の質に与える効果を時系列で表示
  - 例：「禁煙14日 → 精子運動率が改善し始める」
  - 例：「禁煙74日 → 精子の新サイクル完了」
- 亜鉛・葉酸など栄養管理チェックリスト
- 体調・疲労度・睡眠の簡単記録
- 基礎体温アプリ（奥さん用）との連携ポイント提案

### 2.3 モチベーション維持

- 科学的根拠に基づくマイルストーン通知
  - 例：「禁煙30日達成 → 精子DNA損傷リスク低下」
- 節約金額を「赤ちゃんへの貯金」として可視化
- 禁煙継続バッジシステム
- 未来の子どもへのメッセージ日記

### 2.4 パートナー連携

- 奥さんに進捗を共有できる機能
- 二人で妊活を頑張っている感を演出するUI

---

## 3. 技術スタック

| 区分 | 技術・サービス | 備考 |
|------|--------------|------|
| フロントエンド | Streamlit | Pythonで実装可能、既存知識を活用 |
| バックエンド/DB | Supabase | 無料枠で十分（500MB・50,000行） |
| デプロイ | Streamlit Community Cloud | 無料・GitHub連携 |
| 通知 | LINE Notify | 無料・設定簡単 |
| グラフ | Plotly / Altair | Streamlit標準対応 |

> 💡 **選定理由**：既存の基礎体温アプリ・禁煙アプリと同じスタックを採用。学習コストを最小化しつつ、将来的な統合も視野に入れた構成。コストは合計0円。

---

## 4. データベース設計（Supabase）

| テーブル名 | 主なカラム | 用途 |
|-----------|-----------|------|
| user_settings | quit_date, cigarettes_per_day, price_per_pack | 禁煙設定情報 |
| craving_logs | timestamp, intensity(1-5), trigger, resisted | 衝動ログ |
| fertility_logs | date, zinc, folate, sleep_hours, exercise, stress | 妊活デイリーチェック |
| milestones | achieved_at, milestone_key | 達成済みマイルストーン |
| diary_entries | date, message, mood | 未来の子どもへのメッセージ |

---

## 5. 画面構成

| 画面 | 主なコンテンツ |
|------|--------------|
| ホーム（ダッシュボード） | 禁煙日数カウンター、節約金額、本日のチェック状況、直近マイルストーン |
| 禁煙トラッカー | 衝動ログ入力、衝動グラフ（時間帯ヒートマップ）、マイルストーン一覧 |
| 妊活チェック | デイリーチェックリスト、生活習慣スコア推移グラフ |
| 日記 | 未来の子どもへのメッセージ投稿・閲覧 |
| 設定 | 禁煙開始日、本数・価格設定、LINE通知設定 |

---

## 6. 実装計画

### Phase 1 - MVP（1〜2週間）

- **プロジェクト設定・Supabaseスキーマ作成**
- ホーム画面：禁煙日数・節約金額カウンター
- 禁煙トラッカー：衝動ログ入力フォーム
- 妊活チェックリスト（当日分）

### Phase 2 - コア機能（2〜3週間）

- **マイルストーン表示（禁煙日数に応じた医学的効果）**
- グラフ・可視化（衝動ヒートマップ、貯金累積グラフ）
- 生活習慣スコア算出・推移グラフ
- 日記機能（未来の子どもへのメッセージ）

### Phase 3 - 仕上げ（1〜2週間）

- **LINE通知連携（毎朝リマインド・マイルストーン通知）**
- iPhoneブラウザ対応UI最適化
- PWA設定（ホーム画面に追加可能に）
- パートナー共有機能

---

## 7. 開発ロードマップ

| 期間 | Phase | マイルストーン |
|------|-------|--------------|
| Week 1 | Phase 1 | プロジェクト設定・Supabase設計・ホーム画面 |
| Week 2 | Phase 1 | 禁煙トラッカー・妊活チェックリスト完成 → MVP公開 |
| Week 3 | Phase 2 | マイルストーン機能・グラフ実装 |
| Week 4 | Phase 2 | 生活習慣スコア・日記機能完成 |
| Week 5 | Phase 3 | LINE通知・PWA設定 |
| Week 6 | Phase 3 | UI最適化・パートナー共有・リリース |

---

## 8. コスト試算

| 項目 | 費用 | 備考 |
|------|------|------|
| Streamlit Community Cloud | 無料 | GitHubと連携してデプロイ |
| Supabase | 無料 | 500MB・50,000行まで |
| LINE Notify | 無料 | 通知機能 |
| **合計** | **¥0** | |

> 📌 **まとめ**：既存のStreamlit/Supabaseスタックをそのまま活用できるため、セットアップコストも最小限。Phase 1のMVPから始めて、段階的に機能追加していく方針が最速かつリスク最小。